@model DigitalSignageAdapter.Models.Home.SingleBusiness

@{
    ViewBag.Title = "Statistics for business";

    TimeSpan totalAvgWait = TimeSpan.FromSeconds(Model.TotalData.AverageWaitTime);
    TimeSpan totalAvgSvc = TimeSpan.FromSeconds(Model.TotalData.AverageServiceTime);
}

<h2>Statistics for <b>@Model.BusinessName</b></h2>
<table class="table table-condensed table-hover">
    <tbody>
        <tr>
            <td class="col-md-2">Avg. wait time</td>
            <td class="col-md-1 text-right">@totalAvgWait.ToString()</td>
            <td class="col-md-8">&nbsp;</td>
        </tr>
        <tr>
            <td>Avg. service time</td>
            <td class="text-right">@totalAvgSvc.ToString()</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Customers waiting</td>
            <td class="text-right">@Model.TotalData.CustomersWaitingCount.ToString("#,##0")</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Customers being serviced</td>
            <td class="text-right">@Model.TotalData.CustomersBeingServicedCount.ToString("#,##0")</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Customers serviced</td>
            <td class="text-right">@Model.TotalData.CustomersServicedCount.ToString("#,##0")</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>Total customers</td>
            <td class="text-right">@Model.TotalData.CustomersCount.ToString("#,##0")</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table>
<p style="height: 10px">&nbsp;</p>
<h2>Lines</h2>
<table class="table table-condensed table-hover">
    <thead>
        <tr>
            <th class="col-md-2">&nbsp;</th>
            <th class="col-md-1 text-right">Avg. wait</th>
            <th class="col-md-1 text-right">Avg. service</th>
            <th class="col-md-1 text-right">Waiting</th>
            <th class="col-md-1 text-right">Being serviced</th>
            <th class="col-md-1 text-right">Serviced</th>
            <th class="col-md-1 text-right">Total</th>
        </tr>
    </thead>
    <tbody>
        @for (int i = 0; i < Model.DataByLine.Count; i++)
        {
            TimeSpan avgWait = TimeSpan.FromSeconds(Model.DataByLine[i].AverageWaitTime);
            TimeSpan avgSvc = TimeSpan.FromSeconds(Model.DataByLine[i].AverageServiceTime);
            <tr>
                <td><b>@Model.DataByLine[i].LineName</b></td>
                <td class="text-right">@avgWait.ToString()</td>
                <td class="text-right">@avgSvc.ToString()</td>
                <td class="text-right">@Model.DataByLine[i].CustomersWaitingCount.ToString("#,##0")</td>
                <td class="text-right">@Model.DataByLine[i].CustomersBeingServicedCount.ToString("#,##0")</td>
                <td class="text-right">@Model.DataByLine[i].CustomersServicedCount.ToString("#,##0")</td>
                <td class="text-right">@Model.DataByLine[i].CustomersCount.ToString("#,##0")</td>
            </tr>
        }
    </tbody>
</table>

@if (@Model.UserHasMultipleBusinesses)
{
    @Html.ActionLink("« Back", "MultipleBusinesses", null, new { @class = "btn btn-primary" })
}
